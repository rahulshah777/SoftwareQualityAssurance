trigger:
- "*"

pool:
  vmImage: "ubuntu-latest"

steps:
- task: Bash@3
  displayName: "Compile Java sources"
  inputs:
    targetType: "inline"
    script: |
      echo "Compiling Java sources..."
      mkdir -p out
      javac -d out src/*.java

- task: Bash@3
  displayName: "Run ZipfAnalysis functional test"
  inputs:
    targetType: "inline"
    script: |
      echo "Running ZipfAnalysis on sample Wikipedia dataset..."
      if [ ! -f data/wiki-sample.txt ]; then
        echo "ERROR: data/wiki-sample.txt not found. Please add the sample dataset."
        exit 1
      fi
      java -cp out ZipfAnalysis data/wiki-sample.txt
